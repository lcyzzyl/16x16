C51 COMPILER V8.08   STATIC                                                                12/08/2021 00:00:57 PAGE 1   


C51 COMPILER V8.08, COMPILATION OF MODULE STATIC
OBJECT MODULE PLACED IN static.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE static.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          
   2          /************************************************************************************/
   3          /*     ³ÌÐòÃû£º16x16µãÕóÊÔÑé³ÌÐò                                                                                */
   4          /*                                                                                  */
   5          /*     CPUÐÍºÅ£ºAT89S52/STC89C51RC    ¾§Õñ£º12.0 M                                  */
   6          /*                                                                                  */                    
             -                         
   7          /*                                                                                  */
   8          /*     ¹¦ÄÜÃèÊö£º ¿ØÖÆ16x16LEDµãÕóÏÔÊ¾Í¼ÐÎ×ÖÄ¸ºº×ÖµÈ                                */
   9          /*     ÐÐ  É¨    £º 74ls138x2 CPU P1¿ÚÇ°ËÄÎ» A P1^0      B  P1^1  C  P1^2   D  P1^3             */
  10          /*     ÁÐÉ¨£¨Êý¾Ý£©£ºSCK P0^0 RCK P0^1 SER P0^2                                     */
  11          /*     È¡Ä£·½Ê½£º    ÑôÂë ÖðÐÐÊ½  ÄæÏò£¨µÍÎ»ÔÚÇ°£©                                                                                                          */
  12          /*                                                                                                                                                                  */
  13          /*                                                      ¾«Ó¢ÍÅ¶Ó °æÈ¨ËùÓÐ           */                    
             -             
  14          /*                                                            2008-06-20            */
  15          /************************************************************************************/ 
  16          
  17          #include<reg52.h>
  18          #define uchar unsigned char
  19          #define uint unsigned int 
  20           
  21          
  22          
  23          sbit  P_HC595_SCK  =  P0^0;        // CPU  pin 1       SCK        Êý¾ÝÊäÈëÊ±ÖÓ
  24          sbit  P_HC595_RCK  =  P0^1;        // CPU  pin 2       RCK        Êý¾ÝÊä³öÊ±ÖÓ
  25          sbit  P_HC595_SER  =  P0^2;        // CPU  pin 3        SER       Êý¾ÝÊäÈë
  26          
  27          
  28          uint  yanshi=1;
  29          
  30          
  31          uchar code table[]=
  32          {0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f};
  33          
  34          uchar code table_col[]=
  35          {0x80,0x00, 0x40,0x00, 0x20,0x00, 0x10,0x00, 0x08,0x00, 0x04,0x00, 0x02,0x00, 0x01,0x00, 0x00,0x80, 0x00,0
             -x40,0x00,0x20,0x00,0x10,0x00,0x08,0x00,0x04,0x00,0x02,0x00,0x01};
  36          
  37          
  38          
  39          
  40          
  41           
  42          
  43          void delay(uint x)                      //ÑÓÊ±×Óº¯Êý
  44          {       
  45   1              uint i,j;
  46   1              for(i=x;i>0;i--)
  47   1                 for(j=10;j>0;j--);
  48   1      }
  49          
  50          
  51           
  52          
C51 COMPILER V8.08   STATIC                                                                12/08/2021 00:00:57 PAGE 2   

  53          void Send_595(unsigned char dat)        //·¢ËÍÒ»¸ö×Ö½Ú
  54          {                
  55   1              unsigned char  i;
  56   1              for(i=0; i<8; i++)
  57   1              {
  58   2                      if(dat & 0x01)           //Èç¹ûdatºÍ0x01ÓëµÄ½á¹ûÊÇ1£¬Ò²¾ÍÊÇÐèÒªledÁÁ£¬¾Í°ÑÊý¾ÝÎ»ÖÃ0£¬ 
  59   2        
  60   2      //  0000 0000 0000 1000
  61   2      //  0000 0000 0000 0001
  62   2      //  0000 0000 0000 0000
  63   2      //  ÐèÒªÓÒÒÆ
  64   2      //  µÚÒ»Î»»ñÈ¡µÄÊÇ0£¬ÓÉÓÚÊÇÒõÂë 0 Ê±ledÊÇ²»ÁÁµÄ£¬¸ù¾Ý595µÄ¹¤×÷Ô­ÀíºÍµçÂ·Ô­Àí£¬ËÍµÄÊý¾ÝÓ¦¸ÃÎª 1 £¬ËÍµ½µÚËÄÎ
             -»Ê±£¬ÓëµÄ½á¹ûÎª1£¬£¬Êý¾ÝËÍ 0 ¡£
  65   2      
  66   2                                         P_HC595_SER = 0;         //Êý¾ÝÊÇ 0 Ê±£¬led ÁÁ
  67   2                     else                             
  68   2                                         P_HC595_SER = 1;        //Êý¾ÝÊÇ 1  Ê±£¬led²»ÁÁ                  
  69   2                      
  70   2                              // P_HC595_SER  =  dat & 0x80 ;   //È¡³ö×î¸ßÎ»
  71   2                                      
  72   2                                      
  73   2                                      P_HC595_SCK = 0;
  74   2                                      P_HC595_SCK = 1;
  75   2      
  76   2                      dat = dat >> 1;         //ÓÒÒÆ1Î»
  77   2                               
  78   2      
  79   2              }
  80   1      
  81   1              
  82   1      }
  83          
  84          void Show_595_16(unsigned char dat1,dat2)  //ÏÔÊ¾Ò»ÐÐ
  85          
  86          
  87          {
  88   1      
  89   1             Send_595(dat2);    // ËÍÒ»ÐÐµÄ¸ßÎ»Êý¾Ý
  90   1                 Send_595(dat1);        // ËÍÒ»ÐÐµÄµÍÎ»Êý¾Ý
  91   1                                                        
  92   1                
  93   1      
  94   1                 P_HC595_RCK = 1;       //Êý¾ÝËø´æ¸ßµçÆ½
  95   1      
  96   1                 P_HC595_RCK = 0;       //Êý¾ÝËø´æµÍµçÆ½
  97   1      
  98   1                  delay(10);
  99   1                  
 100   1      
 101   1      }
 102          
 103          void Show_595_clear()  //ÇåÆÁ
 104          
 105          {
 106   1      
 107   1          unsigned char j ;
 108   1      
 109   1              for (j=0;j<16;j++)
 110   1          {
 111   2                 P1=table[j];//²é±íÏÔÊ¾Êý×Ö
 112   2      
 113   2                         
C51 COMPILER V8.08   STATIC                                                                12/08/2021 00:00:57 PAGE 3   

 114   2                 Send_595(0x00);        // ËÍÒ»ÐÐµÄ¸ßÎ»Êý¾Ý
 115   2                 Send_595(0x00);        // ËÍÒ»ÐÐµÄµÍÎ»Êý¾Ý
 116   2                                                        
 117   2                 
 118   2                 P_HC595_RCK = 1;       //Êý¾ÝËø´æ¸ßµçÆ½
 119   2      
 120   2                 P_HC595_RCK = 0;       //Êý¾ÝËø´æµÍµçÆ½
 121   2      
 122   2      
 123   2                 delay(1);              //ÑÓÊ±
 124   2      
 125   2                   
 126   2               }
 127   1      
 128   1      }      
 129          
 130              
 131          
 132          
 133          
 134          
 135          /*****************************************************/
 136          /*    º¯Êý¹¦ÄÜ£º                                                                     */
 137          /*    ÔÚµÚ ×ø±êÎªµÚyÐÐ£¬µÚxÁÐµÄ½»µã´¦»­Ò»¸öµã            */
 138          /*                                                                                                       */
 139          /*                                                                                                       */
 140          /*                                                                                                       */
 141          /*                                                                                                       */
 142          /*                                                                                                       */
 143          /*****************************************************/
 144          
 145            
 146           
 147          void Show_595_point(uint x,y)   
 148          
 149          {
 150   1      
 151   1       P1 = table[y];
 152   1      
 153   1       Show_595_16(table_col[2*x],table_col[2*x+1]);
 154   1      
 155   1      
 156   1      
 157   1      
 158   1      }
 159          
 160          
 161          /*****************************************************/
 162          /*    º¯Êý¹¦ÄÜ£º                                                                     */
 163          /*    ÔÚµÚ y ÐÐ´Óx1µ½x2Ö®¼ä»­Ò»ÌõË®Æ½Ïß¶Î             */
 164          /*                                                                                                       */
 165          /*                                                                                                       */
 166          /*                                                                                                       */
 167          /*                                                                                                       */
 168          /*                                                                                                       */
 169          /*****************************************************/
 170          
 171          
 172          
 173          void Show_595_line(uchar x1,x2,y)  //ÏÔÊ¾Ò»ÌõÖ±Ïß¶Î
 174          
 175          {
C51 COMPILER V8.08   STATIC                                                                12/08/2021 00:00:57 PAGE 4   

 176   1                unsigned char  i;
 177   1             
 178   1                
 179   1                 P1 = table[y];
 180   1                 
 181   1             
 182   1                 for(i=x1;i<x2+1;i++)
 183   1      
 184   1                {
 185   2              
 186   2                         
 187   2                 Show_595_16(table_col[2*i],table_col[2*i+1]);
 188   2                 
 189   2                 
 190   2                 
 191   2                 }
 192   1      
 193   1      
 194   1      
 195   1      }
 196          
 197           
 198          /*****************************************************/
 199          /*    º¯Êý¹¦ÄÜ£º                                                         */
 200          /*    ÔÚµÚ y ÐÐ´Óx1µ½x2Ö®¼ä»­Ò»ÌõÊúÖ±Ö±Ïß¶Î           */
 201          /*                                                                                                       */
 202          /*                                                                                                       */
 203          /*                                                                                                       */
 204          /*                                                                                                       */
 205          /*                                                                                                       */
 206          /*****************************************************/
 207          
 208          
 209          
 210          void Show_595_yline(uchar x,y1,y2)  //ÏÔÊ¾Ò»ÌõÊúÖ±Ö±Ïß¶Î
 211          
 212          {
 213   1                unsigned char  i;
 214   1      
 215   1                
 216   1                Show_595_16(table_col[2*x],table_col[2*x+1]);
 217   1      
 218   1                   
 219   1                 for(i=y1;i<(y2+1);i++)
 220   1      
 221   1                {
 222   2              
 223   2                         
 224   2                 P1 = table[i];
 225   2                 
 226   2                 
 227   2                 
 228   2                 }
 229   1      
 230   1      
 231   1      
 232   1      }
 233          
 234          
 235          
 236          void Show_595_xline(uchar x1,y1,x2,y2)  //»­Ò»ÌõÆðµã×ø±êÎª£¨x1,y1£©ÖÕµã×ø±êÎª£¨x2£¬y2£©µÄÐ±Ïß¶Î
 237          
C51 COMPILER V8.08   STATIC                                                                12/08/2021 00:00:57 PAGE 5   

 238          {
 239   1                unsigned char  i;
 240   1      
 241   1                for(i=x1;i<x2+1;i++)
 242   1      
 243   1             {
 244   2                 
 245   2                      Show_595_point(i,((y2-y1)*i/(x2-x1)+(y1*x2-y2*x1)/(x2-x1))); 
 246   2                      
 247   2                       
 248   2                 }
 249   1      
 250   1                
 251   1      
 252   1                   
 253   1                  
 254   1      
 255   1      
 256   1      }
 257           
 258          
 259            void main()
 260          {       
 261   1       
 262   1      
 263   1       while(1) {  
 264   2                              unsigned char  i,j;
 265   2      
 266   2                              
 267   2                              
 268   2                              for (i=15;i>0;i--)
 269   2       
 270   2       
 271   2                  {    for (j=0;j<2;j++)
 272   3                              
 273   3                                    {Show_595_xline(0,15,15,i);}
 274   3                                
 275   3                  }
 276   2      
 277   2      
 278   2                                      for (i=15;i>0;i--)
 279   2       
 280   2       
 281   2                  {    for (j=0;j<2;j++)
 282   3                              
 283   3                                    {Show_595_xline(0,15,i,0);}
 284   3                                
 285   3                  }
 286   2                              
 287   2      /*                   
 288   2                               for (i=0;i<16;i++)
 289   2       
 290   2       
 291   2                  {    for (j=0;j<2;j++)
 292   2                              
 293   2                                    {Show_595_xline(0,15,i,0);}
 294   2                                
 295   2                  }
 296   2      
 297   2      
 298   2                                      for (i=0;i<16;i++)
 299   2       
C51 COMPILER V8.08   STATIC                                                                12/08/2021 00:00:57 PAGE 6   

 300   2       
 301   2                  {    for (j=0;j<2;j++)
 302   2                              
 303   2                                    {Show_595_xline(0,15,15,i);}
 304   2                                
 305   2                  }
 306   2      
 307   2      */
 308   2      
 309   2      /////////////////////////////////////////////////////////////////////////////            
 310   2                              
 311   2                                      for (i=0;i<16;i++)
 312   2       
 313   2       
 314   2                  {    for (j=0;j<2;j++)
 315   3                              
 316   3                                    {Show_595_xline(0,i,15,15);}
 317   3                                
 318   3                  }
 319   2      
 320   2      
 321   2                                      for (i=0;i<16;i++)
 322   2       
 323   2       
 324   2                  {    for (j=0;j<2;j++)
 325   3                              
 326   3                                    {Show_595_xline(0,i,15,0);}
 327   3                                
 328   3                  }
 329   2                              
 330   2                           
 331   2                              for (i=0;i<16;i++)
 332   2       
 333   2       
 334   2                  {    for (j=0;j<2;j++)
 335   3                              
 336   3                                    {Show_595_xline(0,0,i,15);}
 337   3                                
 338   3                  }  
 339   2                       
 340   2                              
 341   2      
 342   2                           
 343   2      
 344   2      
 345   2                               
 346   2      
 347   2                      
 348   2                      }
 349   1        
 350   1      
 351   1      
 352   1               
 353   1      
 354   1      }
 355          
 356          
 357          
 358          
 359          
 360           
 361          
C51 COMPILER V8.08   STATIC                                                                12/08/2021 00:00:57 PAGE 7   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    663    ----
   CONSTANT SIZE    =     48    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2      16
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
